(this["webpackJsonpcase-ws"]=this["webpackJsonpcase-ws"]||[]).push([[0],{40:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a,c=n(1),s=n.n(c),r=n(30),o=n.n(r),i=(n(40),n(2)),u=n.n(i),l=n(4),d=n(24),j=n(5),h=n(19),b=n(3),m=n(8),f=n(56),O=n(57),x=n(58),p="https://chatwskul.herokuapp.com",g=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p+t,{method:"GET",signal:n,headers:{authorization:localStorage.getItem("token")||""}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,fetch(p+t,{method:"POST",headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")||""},body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=n(0),N=function(e){var t=e.loginSignup,n=e.setLoginSignup,a=e.usernameInput,c=e.passwordInput,s=e.theme,r=e.avatar,o=e.setResponseMessage,i=Object(j.g)(),d="login"===t?["Log in","Dont have account? ","Sign up"]:["Sign up","By singing up you agree osvosv ","terms and conditions"],h=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/user-login","login"!==t&&(n="/create-user"),l={name:a,password:c,avatar:r[0],avatarChange:r[1],theme:s[0],themeChange:s[1]},e.next=5,v(n,l);case 5:if(!(d=e.sent).success){e.next=11;break}return localStorage.setItem("token",d.data),e.abrupt("return",i.push("/dashboard"));case 11:o(d.message);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{className:"flex center login-con-logsign-con",children:[Object(C.jsx)("button",{type:"button",className:"center login-btn",onClick:function(){return h(t)},children:d[0]}),Object(C.jsxs)("p",{className:"center login-con-noaccount",children:[d[1],Object(C.jsx)("span",{onClick:function(){"login"===t?n("signup"):console.log("terms and condition page")},children:d[2]})]})]})},w=768,k=function(e){var t=e.condition,n=e.children;return Object(C.jsx)(C.Fragment,{children:t&&n})},S=["Asset-25.png","avatar-prel.png","Asset-5.png","Asset-9.png","Asset-10.png","Asset-11.png","Asset-12.png","Asset-13.png","Asset-14.png","Asset-15.png","Asset-16.png","Asset-17.png","Asset-18.png","Asset-19.png","Asset-20.png","Asset-21.png","Asset-23.png","Asset-24.png"],A=n(9),y=Object(A.a)("div")(a||(a=Object(m.a)(["\n  background-image: url(../avatars/",");\n"])),(function(e){return e.img})),_=function(){console.log(S);var e=Object(c.useState)(window.innerWidth),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)("login"),r=Object(b.a)(s,2),o=r[0],i=r[1],u=Object(c.useState)([S[0],0]),l=Object(b.a)(u,2),d=l[0],j=l[1],h=Object(c.useState)(!1),m=Object(b.a)(h,2),p=m[0],g=m[1],v=Object(c.useState)([0,0]),A=Object(b.a)(v,2),_=A[0],L=A[1],D=Object(c.useState)(""),M=Object(b.a)(D,2),F=M[0],E=M[1],J=Object(c.useState)(""),P=Object(b.a)(J,2),W=P[0],I=P[1],T=Object(c.useState)(null),z=Object(b.a)(T,2),U=z[0],B=z[1];return Object(c.useEffect)((function(){var e=window.addEventListener("resize",(function(){return a(window.innerWidth)}));return window.removeEventListener("resize",e)}),[n]),Object(C.jsxs)(f.a,{className:"page page-home ".concat(n<w?"page-home-mobile":"page-home-desktop"),children:[Object(C.jsxs)(f.a,{className:"flex login-con",children:[Object(C.jsx)("h3",{children:"login"===o?"Welcome":"Create account"}),Object(C.jsx)(f.a,{className:"height100",children:Object(C.jsxs)(O.a,{className:"height100",children:[Object(C.jsx)(x.a,{lg:{span:p?5:8,order:1},md:{span:p?5:8,order:1},xs:{span:12,order:1},className:"col-nopad home-con-col1",children:Object(C.jsxs)("section",{className:"flex height100 login-con-form-btn",children:[Object(C.jsxs)("div",{className:"flex login-con-form-userpass",children:[Object(C.jsx)("label",{htmlFor:"name",children:"username:"}),Object(C.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"haakon1337",onChange:function(e){return E(e.target.value)}}),Object(C.jsx)("label",{htmlFor:"password",children:"password:"}),Object(C.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"pAssword123!",onChange:function(e){return I(e.target.value)}}),Object(C.jsx)("input",{type:"number",name:"theme",value:_[0],hidden:!0}),Object(C.jsx)("input",{type:"number",name:"avatar",value:d[0],hidden:!0}),Object(C.jsx)("input",{type:"number",name:"avatarChange",defaultValue:d[1],hidden:!0}),Object(C.jsx)("input",{type:"number",name:"themeChange",defaultValue:_[1],hidden:!0})]}),Object(C.jsx)(k,{condition:null!==U,children:Object(C.jsx)("div",{children:U})}),Object(C.jsx)(k,{condition:n>w,children:Object(C.jsx)(N,{loginSignup:o,setLoginSignup:i,usernameInput:F,passwordInput:W,theme:_,avatar:d,setResponseMessage:B})})]})}),Object(C.jsxs)(x.a,{lg:{span:p?3:4,order:2},md:{span:p?3:4,order:2},xs:{span:12,order:2},className:"home-con-col2 ".concat(n<w?"flex":""," col-nopad"),children:[Object(C.jsxs)(x.a,{lg:{span:12,order:1},md:{span:12,order:1},xs:{span:6,order:1},className:"login-con-avatar-con col-nopad",children:[Object(C.jsx)(y,{img:d[0],className:"chosen-avatar"}),Object(C.jsx)("button",{onClick:function(){return g(!p)},children:"byt"})]}),Object(C.jsxs)(x.a,{lg:{span:12,order:2},md:{span:12,order:2},xs:{span:6,order:2},className:"login-con-theme-con col-nopad",children:[Object(C.jsx)("button",{onClick:function(){return L([0,1])},children:"olf theme"}),Object(C.jsx)("button",{onClick:function(){return L([1,1])},children:"poke theme"})]})]}),Object(C.jsx)(k,{condition:p,children:Object(C.jsx)(x.a,{lg:{span:4,order:3},md:{span:4,order:3},xs:{span:12,order:3},className:"flex col-nopad home-con-col3",children:S.map((function(e){return Object(C.jsx)(y,{img:e,className:"avatars",onClick:function(){return j([e,1])}})}))})})]})})]}),Object(C.jsx)(k,{condition:n<w,children:Object(C.jsx)(N,{loginSignup:o,setLoginSignup:i,usernameInput:F,passwordInput:W,theme:_,avatar:d,setResponseMessage:B})})]})};var L,D,M,F,E,J,P=Object(A.a)("section")(L||(L=Object(m.a)(["\n  background: linear-gradient(\n    235deg,\n    "," 25%,\n    rgba(255, 255, 255, 1) 25%\n  );\n"])),(function(e){return e.theme})),W=Object(A.a)("div")(D||(D=Object(m.a)(["\n  background-image: url(../avatars/",");\n"])),(function(e){return e.img})),I=function(e){var t=e.user,n=e.userChatrooms,a=e.joinableChatrooms,c=e.searchChatrooms,s=e.setActiveChatroom,r=e.searchJoinableChatroomsCheckbox,o=e.setCreateChatroom,i=e.fetchLastMsg,u=e.setFetchLastMsg,l=e.Messages,d=e.setmessages,j=e.ws;return Object(C.jsx)("section",{className:"flex dash-home-chatrooms",children:Object(C.jsx)("div",{className:"flex home-chatrooms-con",children:!1===r?n.map((function(e){return Object(C.jsx)(k,{condition:e.name.includes(c),children:Object(C.jsx)(T,{joinable:"notJoinable",setActiveChatroom:s,room:e,user:t,setCreateChatroom:o,fetchLastMsg:i,setFetchLastMsg:u,Messages:l,setmessages:d,ws:j})})})):a.map((function(e){return Object(C.jsx)(k,{condition:e.name.includes(c),children:Object(C.jsx)(T,{joinable:"joinable",setActiveChatroom:s,room:e,user:t,ws:j})})}))})})},T=function(e){var t=e.joinable,n=e.room,a=e.setActiveChatroom,s=e.user,r=e.setCreateChatroom,o=e.fetchLastMsg,i=e.ws,d=Object(c.useState)({}),j=Object(b.a)(d,2),h=j[0],m=j[1],f=Object(c.useState)({}),O=Object(b.a)(f,2),x=O[0],p=O[1],N=Object(c.useState)(!0),w=Object(b.a)(N,2),S=(w[0],w[1]),A=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetch last"),e.next=3,g("/protected/get-message/".concat(n.messages.at(-1)),t);case 3:if(a=e.sent,m(a.data),null===a.data){e.next=10;break}return e.next=8,g("/protected/get-user/".concat(a.data.sender),t);case 8:c=e.sent,p(c.data);case 10:S(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetch starmark"),e.next=3,v("/protected/starmark-chatroom/".concat(n._id,"/").concat(s._id));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/protected/join-chatroom/".concat(n._id,"/").concat(s._id));case 2:e.sent,i.send(JSON.stringify({type:"roomsUpdate"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("notJoinable"!==t){e.next=5;break}return n=new AbortController,e.next=4,A(n.signal);case 4:return e.abrupt("return",(function(){return n.abort()}));case 5:case"end":return e.stop()}}),e)}))),[o]),Object(C.jsx)(C.Fragment,{children:"notJoinable"===t?Object(C.jsxs)(P,{theme:n.theme,className:"col2-chatroom-con",onClick:function(){a(n),r(!1)},children:[Object(C.jsxs)("div",{className:"flex chatroom-con-title-fav-con",children:[Object(C.jsx)("div",{className:"flex fav-con-name-admin",children:Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("h5",{children:n.name}),Object(C.jsx)(k,{condition:n.admins.includes(s._id),children:Object(C.jsx)("div",{className:"fav-con-admin-icon",children:"A"})})]})}),Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(C.jsx)("path",{className:"".concat(n.starmarked.includes(s._id)?"starmarked":""," title-fav-con-fav"),onClick:function(e){e.target.classList.toggle("starmarked"),y()},d:"M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"})})]}),null!==h?Object(C.jsxs)("div",{className:"flex chatroom-con-mes",children:[Object(C.jsx)(W,{img:x.avatar,className:"con-mes-avatar"}),Object(C.jsx)(z,{value:h})]}):Object(C.jsx)("div",{className:"con-mes-no-message",children:"no messages"})]}):Object(C.jsxs)(P,{className:"col2-chatroom-con",theme:n.theme,children:[Object(C.jsx)("div",{className:"flex chatroom-con-title-fav-con",children:Object(C.jsx)("h5",{children:n.name})}),Object(C.jsx)("button",{onClick:function(){return _()},children:"JOIN"})]})})},z=function(e){var t=e.value;return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"con-mes-message",children:t.text}),Object(C.jsx)("div",{className:"con-mes-message-time",children:t.time})]})},U=n(12),B=function(){var e=(new Date).toLocaleDateString().split("-"),t=e[0].at(-2)+e[0].at(-1);if(0===e[1].at(0)&&0===e[2].at(0)){var n=e[2],a=e[1];e="".concat(n[1],"/").concat(a[1])}else if(0===e[1].at(0)){var c=e[1];e="".concat(e[2],"/").concat(c[1])}else if(0===e[2].at(0)){var s=e[2];e="".concat(s[1],"/").concat(e[1])}else e="".concat(e[2],"/").concat(e[1]);var r=(new Date).toLocaleTimeString().split(":");return e+"-"+t+" "+(r[0]+":"+r[1])},V=Object(A.a)("div")(M||(M=Object(m.a)(["\n  background-image: url(../avatars/",");\n"])),(function(e){return e.img})),H=function(e){var t=e.activeChatroom,n=e.user,a=e.fetchLastMsg,s=e.setFetchLastMsg,r=e.ws,o=Object(c.useState)(null),i=Object(b.a)(o,2),d=i[0],j=i[1],h=Object(c.useState)([]),m=Object(b.a)(h,2),f=m[0],O=m[1],x=Object(c.useState)(!0),p=Object(b.a)(x,2),N=(p[0],p[1]),w=Object(c.useState)(""),S=Object(b.a)(w,2),A=S[0],y=S[1],_=Object(c.useState)([]),L=Object(b.a)(_,2),D=L[0],M=L[1],F=Object(c.useState)([]),E=Object(b.a)(F,2),J=(E[0],E[1]),P=Object(c.useState)([]),W=Object(b.a)(P,2),I=(W[0],W[1]),T=Object(c.useState)([]),z=Object(b.a)(T,2),H=z[0],q=z[1],G=Object(c.useState)(!1),R=Object(b.a)(G,2),X=R[0],Z=(R[1],function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-all-users",t);case 2:a=e.sent,M(a.data.filter((function(e){return n.members.includes(e._id)})).sort((function(e,t){return n.admins.includes(t._id)-n.admins.includes(e._id)}))),J(a.data.filter((function(e){return!n.members.includes(e._id)}))),I(a.data.filter((function(e){return n.admins.includes(e._id)}))),N(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=function(){var e=Object(l.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-chatroom-messages/"+t._id,n);case 2:return a=e.sent,e.next=5,Z(n,t);case 5:Q(a.data),O(a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){for(var t=[],n=0;n<e.length;n++)e[n+1]?e[n].sender!==e[n+1].sender&&t.push(e[n]):t.push(e[n]);q(t)};return Object(c.useEffect)((function(){r&&(r.onmessage=function(){var e=Object(l.a)(u.a.mark((function e(c){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("message"!==(r=JSON.parse(c.data)).type){e.next=7;break}if(n._id!==r.sender){e.next=6;break}return e.next=5,v("/protected/create-message",r);case 5:e.sent;case 6:r.chatroom===t._id&&(O([].concat(Object(U.a)(f),[r])),(o=f).push(r),Q(o),s(!a),document.querySelector(".chat-con-mid").scrollTop=document.querySelector(".chat-con-mid").scrollHeight);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[r.onmessage]),Object(c.useEffect)((function(){d&&r&&1===r.readyState&&(r.send(JSON.stringify(d)),r.send(JSON.stringify({type:"roomsUpdate"})))}),[d]),Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new AbortController,null===t){e.next=4;break}return e.next=4,K(n.signal);case 4:return e.abrupt("return",(function(){return n.abort()}));case 5:case"end":return e.stop()}}),e)}))),[t,X]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("section",{className:"flex chat-con-top",children:[Object(C.jsxs)("div",{className:"flex top-userinfo",children:[Object(C.jsx)("div",{className:"userinfo-avatar",children:"ava"}),Object(C.jsx)("div",{className:"top-userinfo-chatroom-name",children:t.name})]}),Object(C.jsx)("div",{className:"flex top-settings",children:Object(C.jsx)("div",{className:"userinfo-avatar",children:"..."})})]}),Object(C.jsx)("div",{onClick:function(){document.querySelector(".chat-con-mid").scrollTop=document.querySelector(".chat-con-mid").scrollHeight},children:"go bot"}),Object(C.jsx)("section",{className:"chat-con-mid",children:Object(C.jsx)(k,{condition:f&&0!==f.length,children:f.map((function(e,t){return Object(C.jsx)("div",{className:"".concat(e.sender===n._id?"message-right":"message-left"),children:Object(C.jsxs)("div",{className:"flex message-wrapper",children:[Object(C.jsx)(k,{condition:e.sender!==n._id&&H.includes(e),children:Object(C.jsx)(V,{img:D.filter((function(t){return t._id===e.sender}))[0].avatar,className:"message-avatar"})}),Object(C.jsx)("div",{className:"message-text",children:e.text}),Object(C.jsx)(k,{condition:e.sender===n._id&&H.includes(e),children:Object(C.jsx)(V,{img:D.filter((function(t){return t._id===e.sender}))[0].avatar,className:"message-avatar"})})]})})}))})}),Object(C.jsxs)("section",{className:"flex chat-con-bot",children:[Object(C.jsx)("div",{className:"con-bot-con-message",children:Object(C.jsx)("input",{placeholder:"write message",value:A,onChange:function(e){return y(e.target.value)}})}),Object(C.jsx)("button",{type:"button",onClick:function(){j({type:"message",sender:n._id,chatroom:t._id,text:A,time:B()})},children:"send"})]})]})},q=function(e){var t=e.setCreateChatroom,n=e.createChatroom,a=e.user,s=e.ws,r=Object(c.useState)(!0),o=Object(b.a)(r,2),i=(o[0],o[1]),d=Object(c.useState)(""),j=Object(b.a)(d,2),h=j[0],m=j[1],f=Object(c.useState)("#FA0000"),O=Object(b.a)(f,2),x=O[0],p=O[1],N=Object(c.useState)([a._id]),w=Object(b.a)(N,2),S=w[0],A=w[1],y=Object(c.useState)([]),_=Object(b.a)(y,2),L=_[0],D=_[1],M=Object(c.useState)(""),F=Object(b.a)(M,2),E=F[0],J=F[1],P=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-all-users",t);case 2:n=e.sent,D(n.data),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/protected/create-chatroom",{name:h,admins:[a._id],members:S,theme:x});case 2:t(!1),s.send(JSON.stringify({type:"roomsUpdate"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new AbortController,!n){e.next=4;break}return e.next=4,P(t.signal);case 4:return e.abrupt("return",(function(){return t.abort()}));case 5:case"end":return e.stop()}}),e)}))),[n]),Object(C.jsxs)("section",{className:"dashboard-con-create-con",children:[Object(C.jsxs)("div",{className:"flex create-con-top",children:[Object(C.jsx)("h3",{children:"Create chatroom"}),Object(C.jsx)("button",{className:"create-con-button-back",onClick:function(){return t(!1)},children:"BACK"})]}),Object(C.jsxs)("div",{className:"create-con-name",children:[Object(C.jsx)("label",{htmlFor:"",className:"create-con-text",children:"Name:"}),Object(C.jsx)("input",{className:"create-con-input-text",type:"text",name:"name",onChange:function(e){return m(e.target.value)}})]}),Object(C.jsxs)("div",{className:"flex create-con-theme-color",children:[Object(C.jsx)("input",{type:"text",name:"theme",value:x,hidden:!0}),Object(C.jsx)("div",{className:"create-con-text",children:"Color:"}),Object(C.jsxs)("div",{className:"flex create-con-default-colors",children:[Object(C.jsx)("div",{className:"create-con-green",onClick:function(){return p("#A2DC68")}}),Object(C.jsx)("div",{className:"create-con-blue",onClick:function(){return p("#68DCC4")}}),Object(C.jsx)("div",{className:"create-con-purple",onClick:function(){return p("#DC68D0")}}),Object(C.jsx)("div",{className:"create-con-yellow",onClick:function(){return p("#D8DC68")}})]})]}),Object(C.jsxs)("div",{className:"flex create-con-pick-color",children:[Object(C.jsx)("div",{className:"create-con-text",children:"Pick your own:"}),Object(C.jsx)("input",{className:"create-con-color-picker",type:"color",onChange:function(e){return p(e.target.value)}})]}),Object(C.jsxs)("div",{className:"create-con-add-user",children:[Object(C.jsx)("label",{className:"create-con-text",htmlFor:"",children:"Add ppl:"}),Object(C.jsx)("input",{className:"create-con-input-text",type:"text",placeholder:"search user",onChange:function(e){return J(e.target.value)}}),Object(C.jsx)("div",{className:"flex add-user-user-container",children:Object(C.jsx)(k,{condition:""!==E,children:L.map((function(e){return Object(C.jsx)(k,{condition:e.name.includes(E),children:Object(C.jsx)("div",{className:"flex",onClick:function(){S.includes(e._id)?A(S.filter((function(t){return t!==e._id}))):A((function(t){return[].concat(Object(U.a)(t),[e._id])}))},children:Object(C.jsx)("div",{className:"user-add-name ".concat(S.includes(e._id)?"added":""),children:e.name})})})}))})})]}),Object(C.jsx)("button",{className:"create-con-button-create",onClick:function(){return W()},children:"CREATE"})]})},G=function(e){var t=e.user,n=e.activeChatroom,a=e.setActiveChatroom,c=e.ws,s=e.createChatroom,r=e.setCreateChatroom,o=e.fetchChatrooms,i=e.fetchLastMsg,u=e.setFetchLastMsg,l=e.send,d=e.message,j=e.messages,h=e.setMessage,b=e.setMessages;return Object(C.jsx)("section",{className:"flex height100 col3-chat-con",children:s?Object(C.jsx)(q,{fetchChatrooms:o,setCreateChatroom:r,createChatroom:s,user:t,ws:c}):Object(C.jsx)(C.Fragment,{children:null!==n?Object(C.jsx)(H,{activeChatroom:n,setActiveChatroom:a,user:t,fetchLastMsg:i,setFetchLastMsg:u,send:l,message:d,setMessage:h,messages:j,setMessages:b,ws:c}):Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("button",{className:"create-chatroom-button",onClick:function(){return r(!0)},children:"create chatroom"})})})})},R=Object(A.a)("section")(F||(F=Object(m.a)(["\n  background: linear-gradient(\n    235deg,\n    "," 25%,\n    rgba(255, 255, 255, 1) 25%\n  );\n"])),(function(e){return e.theme})),X=function(e){var t=e.searchChatrooms,n=e.setFetchAgain,a=e.fetchAgain,s=e.ws,r=Object(c.useState)(null),o=Object(b.a)(r,2),i=o[0],d=o[1],j=Object(c.useState)(null),h=Object(b.a)(j,2),m=h[0],f=h[1],O=Object(c.useState)(!0),x=Object(b.a)(O,2),p=x[0],N=x[1],w=Object(c.useState)([]),S=Object(b.a)(w,2),A=S[0],y=S[1],_=Object(c.useState)(null),L=Object(b.a)(_,2),D=L[0],M=L[1],F=Object(c.useState)([]),E=Object(b.a)(F,2),J=E[0],P=E[1],W=Object(c.useState)([]),I=Object(b.a)(W,2),T=I[0],z=I[1],B=Object(c.useState)(null),V=Object(b.a)(B,2),H=V[0],q=V[1],G=Object(c.useState)([]),X=Object(b.a)(G,2),Z=X[0],K=X[1],Q=Object(c.useState)(""),Y=Object(b.a)(Q,2),$=Y[0],ee=Y[1],te=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-user",t);case 2:return n=e.sent,d(n.data),e.next=6,ne(t,n.data._id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-all-chatrooms",t);case 2:a=e.sent,y(a.data.filter((function(e){return e.members.includes(n)})).sort((function(e,t){return t.starmarked.includes(n)-e.starmarked.includes(n)}))),N(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-all-users",t);case 2:a=e.sent,P(a.data.filter((function(e){return n.members.includes(e._id)})).sort((function(e,t){return n.admins.includes(t._id)-n.admins.includes(e._id)}))),K(a.data.filter((function(e){return!n.members.includes(e._id)}))),z(a.data.filter((function(e){return n.admins.includes(e._id)})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(l.a)(u.a.mark((function e(t){var c,s,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],T.forEach((function(e){c.push(e._id)})),s=[],J.forEach((function(e){return s.push(e._id)})),r=null===H?m.theme:H,o=null===D?m.name:D,e.next=8,v("/protected/update-chatroom/"+t,{name:o,admins:c,members:s,theme:r});case 8:n(!a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/delete-chatroom/"+c,t);case 2:e.sent,n(!a),s.send(JSON.stringify({type:"roomsUpdate",detail:"roomDelete"}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/protected/leave-chatroom/"+c+"/"+i._id,t);case 2:e.sent,n(!a),s.send(JSON.stringify({type:"roomsUpdate",detail:"roomLeave",room:c,user:i._id}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.onmessage=function(){var e=Object(l.a)(u.a.mark((function e(t){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("roomsUpdate"!==(c=JSON.parse(t.data)).type){e.next=12;break}if("roomLeave"!==c.detail){e.next=12;break}if(!A.some((function(e){return e._id.includes(c.room)}))){e.next=12;break}if(m._id!==c.room||c.user===i._id){e.next=11;break}return s=new AbortController,e.next=8,ne(s.signal,i._id);case 8:f(m),e.next=12;break;case 11:n(!a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 1:case"end":return e.stop()}}),e)}))),[s.onmessage]),Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,te(t.signal);case 3:return e.abrupt("return",(function(){return t.abort()}));case 4:case"end":return e.stop()}}),e)}))),[a]),Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new AbortController,null===m){e.next=4;break}return e.next=4,ae(t.signal,m);case 4:return e.abrupt("return",(function(){return t.abort()}));case 5:case"end":return e.stop()}}),e)}))),[m]),p?Object(C.jsx)("h2",{className:"",children:"Loading..."}):Object(C.jsx)("section",{className:"flex dash-settings-chatrooms",children:A.map((function(e){return Object(C.jsx)(k,{condition:e.name.includes(t),children:Object(C.jsxs)(R,{theme:e.theme,className:"col2-chatroom-con",onClick:function(){f(e)},children:[Object(C.jsxs)("h5",{className:"flex",children:[e.name,Object(C.jsx)(k,{condition:e.admins.includes(i._id),children:Object(C.jsx)("span",{children:"A"})})]}),Object(C.jsxs)(k,{condition:m===e,children:[Object(C.jsxs)(k,{condition:e.admins.includes(i._id),children:[Object(C.jsxs)("p",{className:"chat-settings-members",children:[e.members.length," members"]}),Object(C.jsx)("label",{className:"chat-settings-text",children:"Change name:"}),Object(C.jsx)("input",{className:"chat-settings-input-text",type:"text",placeholder:e.name,onChange:function(e){return M(e.target.value)}}),Object(C.jsx)("div",{className:"chat-settings-text",children:"Members:"}),Object(C.jsx)("div",{className:"flex chat-settings-members-container",children:J.map((function(e,t){return Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"flex chat-settings-current-members",children:[Object(C.jsxs)("div",{className:"current-members",children:[e.name," "]}),Object(C.jsx)(k,{condition:T.includes(e),children:Object(C.jsx)("span",{children:"A"})})]}),Object(C.jsxs)(k,{condition:e._id!==i._id,children:[Object(C.jsx)(k,{condition:!T.includes(e),children:Object(C.jsx)("div",{className:"chat-settings-make-admin",onClick:function(){return z((function(t){return[].concat(Object(U.a)(t),[e])}))},children:"adminize"})}),Object(C.jsx)(k,{condition:!T.includes(e),children:Object(C.jsx)("div",{className:"chat-settings-kick",onClick:function(){var t=J.filter((function(t){return t._id!==e._id}));P(t);var n=Z;n.includes(e)||n.push(e),K(n)},children:"kick"})})]})]})}))}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("label",{className:"chat-settings-text",children:"Add member:"}),Object(C.jsx)("input",{className:"chat-settings-input-text",type:"text",placeholder:"search member",value:$,onChange:function(e){return ee(e.target.value)}})]}),Object(C.jsx)("div",{children:Object(C.jsx)(k,{condition:""!==$,children:Z.map((function(e){return Object(C.jsx)(k,{condition:void 0!==e,children:Object(C.jsx)(k,{condition:e.name.includes($)&&!J.includes(e),children:Object(C.jsx)("span",{className:"chat-settings-add-member-user",onClick:function(){return P((function(t){return[].concat(Object(U.a)(t),[e])}))},children:e.name})})})}))})}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"chat-settings-text",children:"Color:"}),Object(C.jsxs)("div",{className:"flex chat-settings-default-colors",children:[Object(C.jsx)("div",{className:"settings-con-green ".concat("#A2DC68"===H?"chosen-color":""),onClick:function(){return q("#A2DC68")}}),Object(C.jsx)("div",{className:"settings-con-blue ".concat("#68DCC4"===H?"chosen-color":""),onClick:function(){return q("#68DCC4")}}),Object(C.jsx)("div",{className:"settings-con-purple ".concat("#DC68D0"===H?"chosen-color":""),onClick:function(){return q("#DC68D0")}}),Object(C.jsx)("div",{className:"settings-con-yellow ".concat("#D8DC68"===H?"chosen-color":""),onClick:function(){return q("#D8DC68")}})]}),Object(C.jsxs)("div",{className:"flex chat-settings-color-pick",children:[Object(C.jsx)("div",{className:"chat-settings-text",children:"Pick your own:"}),Object(C.jsx)("input",{className:"chat-settings-color-picker",type:"color",onChange:function(e){e.target.classList.add("chosen-color"),q(e.target.value)}})]}),Object(C.jsx)("hr",{}),Object(C.jsxs)("div",{className:"chat-settings-delete",onClick:Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new AbortController,t.next=3,se(n.signal,e._id);case 3:return t.abrupt("return",(function(){return n.abort()}));case 4:case"end":return t.stop()}}),t)}))),children:[Object(C.jsx)("span",{children:"X"})," Delete chatroom"]}),Object(C.jsx)("div",{className:"chat-settings-save",onClick:function(){return ce(e._id)},children:"SAVE"})]}),Object(C.jsxs)(k,{condition:!e.admins.includes(i._id),children:[Object(C.jsxs)("p",{className:"chat-settings-members",children:[e.members.length," members"]}),Object(C.jsx)("div",{className:"chat-settings-text",children:"Members:"}),Object(C.jsx)("div",{className:"flex chat-settings-members-container",children:J.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"flex chat-settings-current-members",children:[Object(C.jsx)("div",{className:"current-members",children:e.name}),Object(C.jsx)(k,{condition:T.includes(e),children:Object(C.jsx)("span",{children:"A"})})]})})}))}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("label",{className:"chat-settings-text",children:"add members:"}),Object(C.jsx)("input",{className:"chat-settings-input-text",type:"text",placeholder:"search user",value:$,onChange:function(e){return ee(e.target.value)}})]}),Object(C.jsx)("div",{children:Object(C.jsx)(k,{condition:""!==$,children:Z.map((function(e){return Object(C.jsx)(k,{condition:void 0!==e,children:Object(C.jsx)(k,{condition:e.name.includes($)&&!J.includes(e),children:Object(C.jsx)("span",{className:"chat-settings-add-member-user",onClick:function(){return P((function(t){return[].concat(Object(U.a)(t),[e])}))},children:e.name})})})}))})}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"chat-settings-text",children:"color:"}),Object(C.jsxs)("div",{className:"flex chat-settings-default-colors",children:[Object(C.jsx)("div",{className:"settings-con-green ".concat("#A2DC68"===H?"chosen-color":""),onClick:function(){return q("#A2DC68")}}),Object(C.jsx)("div",{className:"settings-con-blue ".concat("#68DCC4"===H?"chosen-color":""),onClick:function(){return q("#68DCC4")}}),Object(C.jsx)("div",{className:"settings-con-purple ".concat("#DC68D0"===H?"chosen-color":""),onClick:function(){return q("#DC68D0")}}),Object(C.jsx)("div",{className:"settings-con-yellow ".concat("#D8DC68"===H?"chosen-color":""),onClick:function(){return q("#D8DC68")}})]}),Object(C.jsxs)("div",{className:"flex chat-settings-color-pick",children:[Object(C.jsx)("div",{className:"chat-settings-text",children:"pick:"}),Object(C.jsx)("input",{className:"chat-settings-color-picker",type:"color",onChange:function(e){return q(e.target.value)}})]}),Object(C.jsx)("hr",{}),Object(C.jsxs)("div",{className:"chat-settings-delete",onClick:Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new AbortController,t.next=3,re(n.signal,e._id);case 3:return t.abrupt("return",(function(){return n.abort()}));case 4:case"end":return t.stop()}}),t)}))),children:[Object(C.jsx)("span",{children:"X"})," Leave chatroom"]}),Object(C.jsx)("div",{className:"chat-settings-save",onClick:function(){return ce(e._id)},children:"SAVE"})]})]})]})})}))})},Z=Object(A.a)("div")(E||(E=Object(m.a)(["\n  background-image: url(../avatars/",");\n"])),(function(e){return e.img})),K=function(e){var t=e.fetchAgain,n=e.setFetchAgain,a=Object(c.useState)(!0),s=Object(b.a)(a,2),r=s[0],o=s[1],i=Object(c.useState)(!1),d=Object(b.a)(i,2),j=d[0],h=d[1],m=Object(c.useState)(null),f=Object(b.a)(m,2),O=f[0],x=f[1],p=Object(c.useState)(null),N=Object(b.a)(p,2),w=N[0],A=N[1],y=Object(c.useState)(null),_=Object(b.a)(y,2),L=_[0],D=_[1],M=Object(c.useState)(null),F=Object(b.a)(M,2),E=F[0],J=F[1],P=Object(c.useState)(""),W=Object(b.a)(P,2),I=W[0],T=W[1],z=Object(c.useState)(""),U=Object(b.a)(z,2),B=U[0],V=U[1],H=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-user",t);case 2:n=e.sent,x(n.data),J(n.data.name),A([n.data.avatar,0]),D(n.data.theme),o(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/protected/update-user/".concat(O._id),{name:E,newPassword:I,currentPassword:B,avatar:w[0],avatarChange:w[1],theme:L});case 2:e.sent,n(!t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,H(t.signal);case 3:return e.abrupt("return",(function(){return t.abort()}));case 4:case"end":return e.stop()}}),e)}))),[t]),r?Object(C.jsx)("h2",{className:"",children:"Loading..."}):Object(C.jsxs)("div",{className:"col3-settings-con",children:[Object(C.jsxs)("div",{className:"user-settings-input-con",children:[Object(C.jsx)("label",{className:"user-settings-text",htmlFor:"name",children:"Name:"}),Object(C.jsx)("input",{className:"user-settings-input",type:"text",name:"name",placeholder:E,onChange:function(e){return J(e.target.value)}})]}),Object(C.jsxs)("div",{className:"user-settings-input-con",children:[Object(C.jsx)("label",{className:"user-settings-text",htmlFor:"newPassword",children:"New password:"}),Object(C.jsx)("input",{className:"user-settings-input",type:"password",name:"newPassword",onChange:function(e){return T(e.target.value)}})]}),Object(C.jsxs)("div",{className:"user-settings-input-con",children:[Object(C.jsx)("label",{className:"user-settings-text",htmlFor:"password",children:"Current password:"}),Object(C.jsx)("input",{className:"user-settings-input",type:"password",name:"password",onChange:function(e){return V(e.target.value)}})]}),Object(C.jsxs)("div",{className:"flex user-settings-input-con",children:[Object(C.jsx)("label",{className:"user-settings-text",htmlFor:"theme",children:"Theme:"}),Object(C.jsxs)("div",{className:"flex user-settings-themes",children:[Object(C.jsx)("div",{className:"user-settings-theme-1",onClick:function(){return D(0)}}),Object(C.jsx)("div",{className:"user-settings-theme-2",onClick:function(){return D(1)}})]})]}),Object(C.jsxs)("div",{className:"flex user-settings-input-con",children:[Object(C.jsx)("label",{className:"user-settings-text",htmlFor:"avatar",children:"Avatar:"}),Object(C.jsx)(Z,{img:w[0],className:"chosen-avatar"}),Object(C.jsx)("button",{className:"change-avatar-button",onClick:function(){return h(!j)},children:"Change"})]}),Object(C.jsx)(k,{condition:j,children:Object(C.jsx)("div",{className:"flex avatars-con",children:S.map((function(e){return Object(C.jsx)(Z,{img:e,className:"avatars ".concat(e===w[0]?"current-avatar":""),onClick:function(){return A([e,1])}})}))})}),Object(C.jsx)("div",{className:"user-settings-save-con",children:Object(C.jsx)("button",{className:"user-settings-save-button",onClick:function(){return q()},children:"SAVE"})})]})},Q=function(e){var t=e.setDashboardNavState,n=(e.dashboardNavState,e.createChatroom),a=e.setCreateChatroom,c=Object(j.g)();return Object(C.jsxs)("section",{className:"flex col1-nav-con",children:[Object(C.jsxs)("div",{className:"flex nav-con-li",onClick:Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t("home"),n&&a(!1);case 2:case"end":return e.stop()}}),e)}))),children:[Object(C.jsx)("span",{children:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.827",height:"28.927",viewBox:"0 0 31.827 28.927",children:Object(C.jsx)("g",{id:"Component_3_1","data-name":"Component 3 \u2013 1",transform:"translate(1.414 1)",children:Object(C.jsxs)("g",{id:"home-outline",transform:"translate(0 0)",children:[Object(C.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M80,212v15.028a1.03,1.03,0,0,0,1.04,1.019h6.242v-8.66a1.545,1.545,0,0,1,1.56-1.528h5.2a1.545,1.545,0,0,1,1.56,1.528v8.66h6.242a1.03,1.03,0,0,0,1.04-1.019V212",transform:"translate(-76.944 -201.119)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(C.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M61,61.261,47.2,48.271a1.107,1.107,0,0,0-1.41,0L32,61.261",transform:"translate(-32 -48.017)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(C.jsx)("path",{id:"Path_3","data-name":"Path 3",d:"M355.056,71.323V64H352v4.394",transform:"translate(-331.245 -62.982)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})})})}),Object(C.jsx)("div",{className:"nav-con-home",children:"HOME"})]}),Object(C.jsxs)("div",{className:"flex nav-con-li",onClick:function(){t("settings"),n&&a(!1)},children:[Object(C.jsx)("span",{children:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.116",height:"31.834",viewBox:"0 0 31.116 31.834",children:Object(C.jsx)("g",{id:"Component_4_1","data-name":"Component 4 \u2013 1",transform:"translate(1.058 1)",children:Object(C.jsx)("g",{id:"settings-outline",children:Object(C.jsx)("path",{id:"settings-outline-2","data-name":"settings-outline",d:"M62.924,52.478a4.461,4.461,0,1,0,4,4A4.461,4.461,0,0,0,62.924,52.478Zm10.742,4.44a10.758,10.758,0,0,1-.107,1.449l3.151,2.472a.754.754,0,0,1,.171.958L73.9,66.955a.754.754,0,0,1-.916.32l-3.13-1.26a1.123,1.123,0,0,0-1.057.122,11.465,11.465,0,0,1-1.5.874,1.111,1.111,0,0,0-.615.846L66.211,71.2a.772.772,0,0,1-.744.639H59.5a.774.774,0,0,1-.745-.618l-.468-3.333a1.12,1.12,0,0,0-.627-.852,10.824,10.824,0,0,1-1.5-.876,1.115,1.115,0,0,0-1.053-.119L51.985,67.3a.754.754,0,0,1-.916-.319l-2.981-5.158a.753.753,0,0,1,.171-.958l2.663-2.091a1.119,1.119,0,0,0,.418-.981c-.025-.291-.04-.581-.04-.871s.015-.576.04-.861a1.115,1.115,0,0,0-.423-.972l-2.662-2.091a.754.754,0,0,1-.165-.954l2.981-5.158a.754.754,0,0,1,.916-.32l3.13,1.26a1.123,1.123,0,0,0,1.057-.122,11.465,11.465,0,0,1,1.5-.874,1.111,1.111,0,0,0,.615-.846l.469-3.338A.772.772,0,0,1,59.5,42h5.963a.774.774,0,0,1,.745.618l.468,3.333a1.12,1.12,0,0,0,.627.852,10.826,10.826,0,0,1,1.5.876,1.115,1.115,0,0,0,1.053.119l3.129-1.26a.754.754,0,0,1,.916.319l2.981,5.158a.753.753,0,0,1-.171.958l-2.663,2.091a1.119,1.119,0,0,0-.422.981C73.65,56.337,73.665,56.627,73.665,56.917Z",transform:"translate(-47.985 -42)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})})})}),Object(C.jsx)("div",{children:"SETTINGS"})]}),Object(C.jsxs)("div",{onClick:function(){localStorage.removeItem("token"),c.push("/",null)},className:"flex nav-con-li",children:[Object(C.jsx)("span",{children:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31",height:"26.167",viewBox:"0 0 31 26.167",children:Object(C.jsxs)("g",{id:"log-out-outline",transform:"translate(1 1)",children:[Object(C.jsx)("path",{id:"Path_11","data-name":"Path 11",d:"M81.969,114.125v3.021a3.008,3.008,0,0,1-2.995,3.021H66.995A3.008,3.008,0,0,1,64,117.146V99.021A3.008,3.008,0,0,1,66.995,96h11.38c1.654,0,3.594,1.353,3.594,3.021v3.021",transform:"translate(-64 -96)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(C.jsx)("path",{id:"Path_12","data-name":"Path 12",d:"M368,187.979l5.99-5.99L368,176",transform:"translate(-344.99 -169.906)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(C.jsx)("line",{id:"Line_1","data-name":"Line 1",x2:"19",transform:"translate(8.625 12.083)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})})}),Object(C.jsx)("div",{children:"LOG OUT"})]})]})},Y=Object(A.a)("div")(J||(J=Object(m.a)(["\n  background-image: url(../avatars/",");\n"])),(function(e){return e.img})),$=function(e){var t=e.user;return Object(C.jsxs)("section",{className:"flex col1-user-con",children:[Object(C.jsx)(Y,{img:t.avatar,className:"height100 user-con-avatar"}),Object(C.jsx)("div",{className:" flex user-con-user-name",children:t.name})]})},ee=function(e){var t=e.page,n=e.setCheckbox,a=e.setSearchChatrooms;return Object(C.jsxs)("section",{className:"flex search-chatroom-con",children:[Object(C.jsx)("input",{type:"text",placeholder:"search chatrooms",onInput:function(e){return a(e.target.value)}}),Object(C.jsx)(k,{condition:"home"===t,children:Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("label",{htmlFor:"searchJoinableChatroomsCheckbox",children:"all:"}),Object(C.jsx)("input",{type:"checkbox",name:"searchJoinableChatroomsCheckbox",onChange:function(e){return n(e.target.checked)}})]})})]})},te=function(e){var t=e.setSearchChatrooms,n=e.dashboardNavState,a=e.setDashboardNavState,s=e.searchChatrooms,r=e.user,o=e.setFetchAgain,i=e.fetchAgain,u=e.setActiveChatroom,l=e.activeChatroom,d=e.ws,j=Object(c.useState)(window.innerWidth),h=Object(b.a)(j,2),m=h[0],f=h[1];return Object(c.useEffect)((function(){var e=window.addEventListener("resize",(function(){return f(window.innerWidth)}));return window.removeEventListener("resize",e)}),[m]),Object(C.jsxs)(O.a,{className:"dashboard-con",children:[Object(C.jsxs)(x.a,{lg:{span:2,order:1},md:{span:2,order:1},xs:{span:12,order:1},className:"flex dashboard-con-col1",children:[Object(C.jsx)($,{user:r}),Object(C.jsx)(Q,{setDashboardNavState:a,dashboardNavState:n})]}),Object(C.jsxs)(x.a,{lg:{span:6,order:2},md:{span:6,order:2},xs:{span:12,order:2},className:"dashboard-con-col2",children:[Object(C.jsx)("h4",{children:"Chatrooms"}),Object(C.jsx)(ee,{setSearchChatrooms:t,page:n}),Object(C.jsx)(X,{ws:d,searchChatrooms:s,setFetchAgain:o,fetchAgain:i,activeChatroom:l,setActiveChatroom:u})]}),Object(C.jsx)(x.a,{lg:{span:4,order:3},md:{span:4,order:3},xs:{span:12,order:3},className:"dashboard-con-col3",children:Object(C.jsx)(K,{user:r,setFetchAgain:o,fetchAgain:i})})]})},ne=function(e){var t=e.user,n=e.activeChatroom,a=e.setActiveChatroom,s=e.userChatrooms,r=e.joinableChatrooms,o=e.fetchAgain,i=e.setFetchAgain,d=e.fetchChatrooms,j=Object(c.useState)([]),h=Object(b.a)(j,2),m=h[0],p=h[1],g=Object(c.useState)([]),v=Object(b.a)(g,2),N=v[0],S=v[1],A=Object(c.useState)("home"),y=Object(b.a)(A,2),_=y[0],L=y[1],D=Object(c.useState)(window.innerWidth),M=Object(b.a)(D,2),F=M[0],E=M[1],J=Object(c.useState)(!0),P=Object(b.a)(J,2),W=P[0],T=P[1],z=Object(c.useState)(""),U=Object(b.a)(z,2),B=U[0],V=U[1],H=Object(c.useState)(!1),q=Object(b.a)(H,2),R=q[0],X=q[1],Z=Object(c.useState)(!1),K=Object(b.a)(Z,2),Y=K[0],ne=K[1],ae=Object(c.useState)(!1),ce=Object(b.a)(ae,2),se=ce[0],re=ce[1],oe=Object(c.useState)(null),ie=Object(b.a)(oe,2),ue=ie[0],le=ie[1];return Object(c.useEffect)((function(){return ue||le(new WebSocket("ws://localhost:5002")),ue&&(ue.onopen=function(){console.log("WebSocket Connected")},ue.onclose=function(){console.log("WebSocket Gone")},ue.onmessage=function(){var e=Object(l.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("roomsUpdate"!==JSON.parse(n.data).type){e.next=7;break}return i(!o),a=new AbortController,e.next=6,d(a.signal,t._id);case 6:return e.abrupt("return",(function(){return a.abort()}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(!1),function(){ue&&ue.close()}}),[ue]),Object(c.useEffect)((function(){var e=window.addEventListener("resize",(function(){return E(window.innerWidth)}));return window.removeEventListener("resize",e)}),[F]),W?Object(C.jsx)("h2",{className:"",children:"Loading..."}):Object(C.jsx)(f.a,{className:"page page-dashboard ".concat(F<w?"page-dashboard-mobile":"page-dashboard-desktop"),children:"settings"===_?Object(C.jsx)(te,{setSearchChatrooms:V,setDashboardNavState:L,dashboardNavState:_,searchChatrooms:B,user:t,setFetchAgain:i,fetchAgain:o,setActiveChatroom:a,ws:ue}):Object(C.jsxs)(O.a,{className:"dashboard-con",children:[Object(C.jsxs)(x.a,{lg:{span:2,order:1},md:{span:2,order:1},xs:{span:12,order:1},className:"flex dashboard-con-col1",children:[Object(C.jsx)($,{user:t}),Object(C.jsx)(Q,{setDashboardNavState:L,dashboardNavState:_,createChatroom:Y,setCreateChatroom:ne})]}),Object(C.jsxs)(x.a,{lg:{span:5,order:2},md:{span:5,order:2},xs:{span:12,order:2},className:"dashboard-con-col2",children:[Object(C.jsx)("h4",{children:"Chatrooms"}),Object(C.jsx)(ee,{setSearchChatrooms:V,setCheckbox:X,checkbox:R,page:_}),Object(C.jsx)(I,{user:t,userChatrooms:s,joinableChatrooms:r,searchChatrooms:B,fetchLastMsg:se,setFetchLastMsg:re,setActiveChatroom:a,searchJoinableChatroomsCheckbox:R,setCreateChatroom:ne,Messages:N,setmessages:S,ws:ue}),Object(C.jsx)("button",{onClick:function(){ne(!0)},children:"create"})]}),Object(C.jsx)(k,{condition:F>w,children:Object(C.jsx)(x.a,{lg:{span:5,order:3},md:{span:5,order:3},xs:{span:12,order:3},className:"dashboard-con-col3",children:Object(C.jsx)(G,{user:t,activeChatroom:n,setActiveChatroom:a,ws:ue,message:m,setMessage:p,Messages:N,setmessages:S,createChatroom:Y,setCreateChatroom:ne,fetchChatrooms:d,fetchLastMsg:se,setFetchLastMsg:re})})})]})})},ae=n(11),ce=function(){var e,t=Object(c.useState)(null),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!0),o=Object(b.a)(r,2),i=o[0],d=o[1],j=Object(c.useState)("home"),h=Object(b.a)(j,2),m=h[0],f=(h[1],Object(c.useState)(null)),O=Object(b.a)(f,2),x=O[0],p=O[1],v=Object(c.useState)([]),N=Object(b.a)(v,2),w=N[0],k=N[1],S=Object(c.useState)([]),A=Object(b.a)(S,2),y=A[0],_=A[1],L=Object(c.useState)([]),D=Object(b.a)(L,2),M=D[0],F=D[1],E=Object(c.useState)(!1),J=Object(b.a)(E,2),P=J[0],W=J[1],I=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-user",t);case 2:return n=e.sent,s(n.data),e.abrupt("return",T(t,n.data._id));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/protected/get-all-chatrooms",t);case 2:a=e.sent,k(a.data),_(a.data.filter((function(e){return e.members.includes(n)})).sort((function(e,t){return t.starmarked.includes(n)-e.starmarked.includes(n)}))),F(a.data.filter((function(e){return!e.members.includes(n)}))),d(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,I(t.signal);case 3:return e.abrupt("return",(function(){return t.abort()}));case 4:case"end":return e.stop()}}),e)}))),[P,m]),i?Object(C.jsx)("h2",{className:"",children:"Loading..."}):Object(C.jsx)(ne,(e={user:a,setUser:s,activeChatroom:x,setActiveChatroom:p,allChatrooms:w,setAllChatrooms:k,userChatrooms:y,setUserChatrooms:_,joinableChatrooms:M,setJoinableChatrooms:F},Object(ae.a)(e,"allChatrooms",w),Object(ae.a)(e,"setAllChatrooms",k),Object(ae.a)(e,"userChatrooms",y),Object(ae.a)(e,"setFetchAgain",W),Object(ae.a)(e,"fetchAgain",P),Object(ae.a)(e,"fetchChatrooms",T),e))},se=(n(53),n(54),function(){var e=Object(l.a)(u.a.mark((function e(t,n,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/logged-in");case 2:if(c=e.sent,console.log(c),void 0!==t.meta.auth){e.next=6;break}return e.abrupt("return",a());case 6:if(!t.meta.auth||c.data){e.next=8;break}return e.abrupt("return",a.redirect("/"));case 8:if(t.meta.auth||!c.data){e.next=10;break}return e.abrupt("return",a.redirect("/dashboard"));case 10:return e.abrupt("return",a());case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),re=function(){return Object(C.jsx)("p",{children:"Loading..."})},oe=function(){return Object(C.jsx)("p",{children:"Not Found"})};var ie=function(){return console.log("hehe"),Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(d.a,{children:Object(C.jsx)(h.a,{guards:[se],loading:re,error:oe,children:Object(C.jsxs)(j.d,{children:[Object(C.jsx)(h.b,{path:"/",exact:!0,component:_,meta:{auth:!1}}),Object(C.jsx)(h.b,{path:"/dashboard",exact:!0,component:ce,meta:{auth:!0}}),Object(C.jsx)(h.b,{path:"*",component:oe})]})})})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};o.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(ie,{})}),document.getElementById("root")),ue()}},[[55,1,2]]]);
//# sourceMappingURL=main.6771a929.chunk.js.map